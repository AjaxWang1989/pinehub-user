<template>
    <scroll-view class="merchandises-wrapper" :style="{ width: width, height: '100%' }" :scroll-y="true" @scrolltolower="scrolltolower">
        <div class="merchandises-item clearfix bgff" v-for="(item, index) in list" :key="index">
            <div class="merchandises-item-top">
                <img mode = "widthFix" class="merchandises-pic" :src="item.thumbImage" :style="{ width: widthPic, height: heightPic }">
            </div>
            <div class="merchandises-item-bottom">
                <h4 class="merchandises-name">{{item.name}}</h4>
                <span class="tag color00" v-if="item.tags.length > 0" v-for="(tag, index2) in item.tags" :key="index2">{{tag}}</span>
                <p class="describe color75">{{item.describe}}</p>
                <div class="content ">
                    <div class="sell-price color00">{{item.sellPrice}}<span>RMB</span></div>
                    <div class="cartcontrol-warpper ">
                        <cart-control :model="model" @addCart="addCart" @reduceCart="reduceCart" :merchandiseId="item.merchandiseId" :shopId="item.shopId"></cart-control>
                    </div>
                </div>
            </div>
        </div>
    </scroll-view>
</template>
<script>
import CartControl from '@/components/CartControl'
export default {
    props: {
        width: {
            default: '100%',
            type: String
        },
        height: {
            default: '100%',
            type: String
        },
        next: {
            default: null,
            type: Function
        },
        list: {
            default: function () {
                return []
            },
            type: Array
        },
        addMerchandiseToCart: {
            default: null,
            type: Function
        },
        reduceMerchandiseToCart: {
            default: null,
            type: Function
        },
        widthPic: {
            default: '100%',
            type: String
        },
        heightPic: {
            default: 'auto',
            type: String
        },
        model: {
            default: null,
            type: String
        }
    },
    data () {
        return {
            pageCount: 15
        };
    },
    components: {
        'cart-control': CartControl
    },
    created () {
        this.next();
    },
    methods: {
        cartShow: function () {
            this.$emit('show-cart')
        },
        scrolltolower () {
            this.next();
        },
        scroll (e) {
            console.log(e)
        },
        addCart (merchandiseId, id) {
            this.addMerchandiseToCart(merchandiseId, id);
        },
        reduceCart (merchandiseId, id) {
            this.reduceMerchandiseToCart(merchandiseId, id);
        }
    }
}
</script>

<style scoped>
.merchandises-wrapper {
    padding: 20rpx;
    box-sizing: border-box;
    overflow-y: auto;
}

.merchandises-item {
    width: 100%;
    border-radius: 10rpx;
    box-shadow: 0rpx 8rpx 36rpx rgba(204, 202, 202, 0.6);
    margin-bottom: 40rpx;
    box-sizing: border-box;
    position: relative;
    overflow: hidden;
}

.merchandises-item-top {
    width: 100%;
    height: 330rpx;
    overflow-y: hidden;
}

.merchandises-item-bottom {
    width: 100%;
    padding: 20rpx 20rpx 0rpx;
    box-sizing: border-box;
}

.merchandises-item-bottom h4 {
    font-size: 32rpx;
    font-weight: 400;
    margin-bottom: 12rpx;
}

.tag {
    padding: 8rpx 15rpx;
    line-height: 36rpx;
    letter-spacing: 4rpx;
    min-width: 84rpx;
    font-size: 28rpx;
    border: 2rpx solid #ffcc00;
    border-radius: 36rpx;
    text-align: center;
    display: inline-block;
    margin-right: 20rpx;
    margin-bottom: 12rpx;
}

.describe {
    font-size: 22rpx;
}

.content {
    width: 100%;
    margin-top: 20rpx;
    height: 100rpx;
    position: relative;
}

.sell-price {
    font-size: 36rpx;
    font-weight: 400;
    position: absolute;
    bottom: 40rpx;
    left: 0rpx;
}

.sell-price span {
    font-size: 28rpx;
    font-weight: 400;
}

.cartcontrol-warpper {
    margin-top: 30rpx;
    position: absolute;
    bottom: 40rpx;
    right: 0rpx;
}
image {
    display: block;
}
</style>
